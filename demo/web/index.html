<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="node_modules/@picovoice/falcon-web/dist/iife/index.js"></script>
    <script src="node_modules/@picovoice/web-voice-processor/dist/iife/index.js"></script>
    <script src="models/falconModel.js"></script>
    <script type="application/javascript" src="scripts/falcon.js"></script>
    <style>
      table {
        margin-top: 2rem;
        display: inline-block;
        overflow: auto;
      }

      table {
        border-collapse: separate;
      }

      td {
        text-align: right;
        vertical-align: middle;
      }

      tr:nth-child(even) {
        background: #eee;
      }
    </style>
  </head>
  <body>
    <h1>Falcon Web Demo</h1>
    <p>This demo uses Falcon for Web to:</p>
    <ol>
      <li>Create an instance of Falcon with the default language model.</li>
      <li>
        Process/diarize an audio file or a recorded audio stream in browser: the
        data does not leave the browser while Falcon processes the audio data.
      </li>
    </ol>
    After entering the AccessKey, click the "Start Falcon" button.
    <hr />
    <label for="accessKey"
      >AccessKey obtained from
      <a href="https://console.picovoice.ai/">Picovoice Console</a>:</label
    >
    <input type="text" id="accessKey" name="accessKey" />
    <input
      type="button"
      id="submit"
      value="Start Falcon"
      onclick="startFalcon(document.getElementById('accessKey').value)"
    />
    <hr />
    <div id="control" style="display: none">
      <label for="audioFile">Choose audio file to diarize:</label>
      <input type="file" id="audioFile" name="audioFile" />
      <p><b>OR</b></p>
      <label for="recordAudio"
        >Record audio to diarize (up to 2 minutes):</label
      >
      <button id="recordAudio">Record Audio</button>
      <span id="displayTimer" style="display: none"></span>
      <button id="stopRecord" style="display: none">Stop Recording</button>
      <hr />
    </div>
    <div id="status" style="white-space: pre"></div>
    <br />
    <table id="segments-table" style="display: none">
      <colgroup>
        <col span="1" style="width: 20%" />
        <col span="1" style="width: 20%" />
        <col span="1" style="width: 20%" />
      </colgroup>
      <tr>
        <th>Start time (s)</th>
        <th>End time (s)</th>
        <th>Speaker tag</th>
      </tr>
    </table>
  </body>
</html>
